Make a ProxMox Node with NAT VM available outside the local network.

First install your Proxmox OS, then :
- setup "nano /etc/apt/sources.list"
- add "deb http://download.proxmox.com/debian stretch pve-no-subscription"
- edit "nano /etc/apt/sources.list.d/pve-enterprise.list"
- coment the deb line #
- apt-get update &&  apt-get upgrade -y

+ Mettre des templates à dispo en local pour auto install
pveam update
pveam available
pveam download local #$$$$$$Package$$$$$
pveam remove local:vztmpl/#$$$$$Package$$$$$

Creation :
Général >
CT ID : numéro
nom d'hote : reverse
Cocher unprivileged
MDP : mot de passe root

Modèle >
stockage : Local 
modèle : choisir OS

Disque root >
size : nombre de GB

CPU > 
coeur : nb vcore

Memoire >
Ram : nb go
swap : 256mo

Réseau >
Nom (i.e. eth0):	eth0
Adresse MAC:	
Pont:	vmbr1
Tag VLAN:	
Limite de débit (MB/s):	
Parefeu:	
IPv4: 
IPv4/CIDR: 192.168.1.X/24
Passerelle (IPv4):	192.168.1.254
IPv6:
IPv6/CIDR:
Passerelle (IPv6):	

DNS >
laisser vide

===== Débloquer SSH ====
donc, console -> root -> le mdp -> nano /etc/ssh/sshd_config -> trouve "enablerootlogin: whitouth password" tu commente la ligne (# devant) tu enregistre le nano (Ctrl + x |  y | 1enter)  -> service ssh restart
=====
PermitRootLogin yes
Changer le port et dé-commenter

systemctl restart ssh

Apt install htop
apt install fail2ban
systemctl restart networking
systemctl status networking

CONFIG :
- 


LINKS :
- https://linuxconfig.org/how-to-setup-a-static-ip-address-on-debian-linux
- https://medium.com/@cpt_midnight/static-ip-in-debian-9-stretch-acb4e5cb7dc1
- https://debian-facile.org/doc:reseau:interfaces
- http://community.ovh.com/t/configuration-reseau-vrack-debian-stretch/3617
- https://www.sky-future.net/2015/12/13/tuto-proxmox-n3-creation-dun-lan-prive-et-permettre-lacces-internet-sur-ce-lan-sans-ipfo/
- https://serverfault.com/questions/564445/how-can-i-forward-the-http-and-ssh-port-to-my-internal-server-using-iptables
- https://askubuntu.com/questions/311053/how-to-make-ip-forwarding-permanent
- https://www.ameir.net/blog/archives/55-running-proxmox-behind-a-single-ip-address.html/comment-page-1
- https://www.eolya.fr/2016/02/15/ovh-proxmox-reseau-prive/
- http://wiki.csnu.org/index.php/Proxmox_5
- https://raymii.org/s/tutorials/Proxmox_VE_One_Public_IP.html
- https://silentkernel.fr/proxmox-avec-une-seule-ip-forwarding-de-port/
- https://angristan.xyz/setup-network-bridge-lxc-net/

SOURCES :
- https://www.svennd.be/proxmox-ve-5-0-fix-updates-upgrades/
- https://cyberpersons.com/2016/07/27/setup-nat-proxmox/
- https://unix.stackexchange.com/questions/134682/iptables-add-rule-for-interface-before-it-comes-up
- https://serverfault.com/questions/232581/permament-iptables-port-forwarding
- https://www.tutos.snatch-crash.fr/proxmox-creation-de-conteneur-lxc/
- https://pve.proxmox.com/wiki/Unprivileged_LXC_containers
- https://serverfault.com/questions/729810/dnat-port-range-with-different-internal-port-range-with-iptables
- http://linusramos.blogspot.fr/2011/07/iptables-port-forwarding.html

A + : 
https://bash.cyberciti.biz/virtualization/shell-script-to-setup-an-lxd-linux-containers-vm-lab-for-testing-purpose/
Auto setup VM, IP attribution.
- https://www.sky-future.net/2014/01/22/tuto-installer-une-seedbox-sur-debian-avec-interface-web-lecteur-video/
- https://www.kiloroot.com/proxmox-kimsufi-ovh-soyoustart-ipv6-host-multiple-containers-and-virtual-machines-on-a-single-kimsufi-server-using-ipv6-and-proxmox/
- https://blog.blaisethirard.com/tag/kimsufi/
- http://www.viedugeek.eu/topic/227-cr%C3%A9er-des-serveurs-virtuels-debian-7-wheezy-avec-lxc-sur-un-d%C3%A9di%C3%A9-ovh-kimsufi/
- http://hw7.net/?p=252
- http://www.guiguishow.info/2012/10/30/utiliser-lxc-sur-un-kimsufi/#toc-3009-configuration-rseau
- http://www.guiguishow.info/2012/10/30/utiliser-lxc-sur-un-kimsufi/#toc-3009-compiler-un-noyau-utilisant-les-cgroups-grsec
- https://blog.cepharum.de/en/post/lxc-host-featuring-ipv6-connectivity.html
